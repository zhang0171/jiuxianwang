<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>注册</title>
		<style type="text/css">

		</style>
	</head>
	<link rel="stylesheet" type="text/css" href="css/sign.css"/>
	<script src="js/common.js"></script>
	<script src="js/jquery-1.11.0.js"></script>
	<body>
		<!--头部-->
		<div class="top-header">
			<div class="top-head">
				
			
			<div class="top-logo">
				<p><a href="index.html"><img src="img/logo.png"/></a></p>
				<a href="#"><img src="img/slogan.jpg"/></a>
			</div>
			<div class="top-nav">
				<div class="bz">
					<span>帮助中心</span>
					<b><span class="sj"></span></b>
				
				</div>
				<div class="xl">
					<ul>
						<li>配送说明</li>
						<li>支付方式</li>
						<li>售后服务</li>
						<li>企业客户</li>
					</ul>
				</div>
			</div>
			<div class="top-zc">
				欢迎来到酒仙网！
				<!--<a href="">免费注册</a>-->
				<a href="login.html">请登录</a>
			</div>
			</div>
		</div>
<!--中间                                                -->
		<div class="main-warp">
		<div class="geren">
			<h3>
				<span>个人用户注册</span>
				<span style="background:#ff9900;color:white;">企业用户注册</span>
			</h3>
		</div>
		<form action="" method="post">
			<div class="main-zhuce">
				<div class="zhuce-sj zhuce-sjh">
					<p><span>
						手机号
					</span></p>
					<input type="text" name="username" id="sjh" value="" />
					<span class="hm1"></span>
					<span class="hm2"></span>
					<b></b>
				</div>
				
				<div class="zhuce-sj dier">
					<p><span>
						验证码
					</span></p>
					<input type="text" name="" id="yzm" value="" />
					<span class="yzmcu"></span>
					<span></span>
					<b></b>
					<i></i>
				</div>
				
				<div class="zhuce-sj xym">
					<p><span>
						校证码
					</span></p>
					<input type="text" name="xym" id="" value="" />
					<span>再次输入验证码</span>
					<span></span>
				<!--	<span>请输入正确的手机好号码</span>-->
					<b></b>
					<i></i>
				</div>
				
				<div class="zhuce-sj szmm">
					<p><span>
						设置密码
					</span></p>
					<input type="password" name="password" id="szmm" value="" />
					<!--<strong>获取短信验证码</strong>-->
					<span></span>
					<span></span>
					<b></b>
					<i></i>
				</div>
				
					<div class="zhuce-sj szmm qrmm">
					<p>
						<span>确认密码</span>
					</p>
					<input type="password" name="" id="qrmm" value="" />
					<!--<strong>获取短信验证码</strong>-->
					<span></span>
					<span></span>
					<b></b>
					<i></i>
				</div>
				<div class="ryzc">
					<input type="checkbox" checked="checked"  value="" />
					<a href="">我已阅读并同意<span>《酒仙网用户注册协议》</span></a>
				</div>
				<div class="ljzc">
					
					<button id="submit_btn">立 即 注 册</button>
				</div>
			</div>
		</form>
		</div>
		<!--结尾-->
		<div class="footer-warp">
		<footer>
			<p>©  酒仙网  2011 jiuxian.com All  Rights Reserved  京ICP证110141号  京公网安备1101050188221</p>
			<p>购买前请确认达到法定饮酒年龄！酒仙网不销售任何含酒精产品给18岁以下人士！</p>
		</footer>
		</div>

	</body>

	<script type="text/javascript">
		$(function(){
			$('input').eq(0).focus(function(){
				
		if($(this).val().length==0){
			$(this).next("span").text("请输入11位手机号").css("background","red").css("color","white");
		}
	})
		$('input').eq(1).focus(function(){
		if($(this).val().length==0){
			$(this).next("span").text("验证码输入错误").css("background","red").css("color","white");
		}
	})	
	$('input').eq(2).focus(function(){
		if($(this).val().length==0){
			$(this).next("span").text("俩次验证码不一样").css("background","red").css("color","white");
		}
	})	
	$('input').eq(3).focus(function(){
		if($(this).val().length==0){
			$(this).next("span").text("建议使用字母、数字和符号两种以上的组合，6-20个字符").css("background","red").css("color","white");
		}
	})	
	$('input').eq(4).focus(function(){
		if($(this).val().length==0){
			$(this).next("span").text("请再次输入密码").css("background","red").css("color","white");
		}
	})
	//input各种判断
	//用户名：
	$("input").eq(0).blur(function(){
		var ues = /^[1][3,4,5,7,8][0-9]{9}$/;
		if($(this).val().length==0){
			$(this).next("span").text("请输入手机号").css("background","red").css("color","white");
			// $(this).next("span").css("color",'#ccc');
		}else if(ues.test($(this).val())==false){
			$(this).next("span").text("长度只能在11个字符之间");
			$(this).next("span").css("color","white");
		}else{
			$(this).next("span").text("");
		}
		
	})
		
// 	验证码
//	 验证码刷新			
function cod(){
		var str="qwertyuiopasdfghjklzxcvbnm1234567890QWERTYUIOPLKJHGFDSAZXCVBNM";
		var str1=0;
		for(var i=0; i<4;i++){
			str1+=str.charAt(Math.floor(Math.random()*62)) 
		}
		str1=str1.substring(1)
		$(".dier i").text(str1);
	}
	cod();
	$(".dier i").click(cod);	
//	验证码验证
		$("input").eq(1).blur(function(){
			var $yzmval=$(".dier #yzm").val()
//			console.log($(".dier i").text())
		if($(this).val().length==0){
			$(this).next("span").text("").css("background","red").css("color","white");
			// $(this).next("span").css("color",'#ccc');
		}else if($yzmval.toUpperCase()!=$(".dier i").text().toUpperCase()){
//			console.log("aa")
			$(".dier span").show()	
			$(this).next("span").css("color","white").css("background","red");
		}else{
			$(".dier .yzmcu").hide()	
		}
		
	})
//确认验证码
	$('input').eq(2).blur(function(){
		if($(this).val().length==0){
			$(this).next("span").text("");
			$(this).next("span").css("color",'white').css("background","red");
		}else if($(this).val().toUpperCase()!=$('input').eq(1).val().toUpperCase()){
			$(this).next("span").text("两次密码不匹配");
			$(this).next("span").css("color",'white').css("background","red");
		}else{
			$(this).next("span").text("");
		}		
	})
	//设置密码
	$('input').eq(3).blur(function(){
		if($(this).val().length==0){
			$(this).next("span").text("");
			$(this).next("span").css("color",'red');
		}else if($(this).val().length>0 && $(this).val().length<6){
			$(this).next("span").text("长度只能在6-20个字符之间");
			$(this).next("span").css("color",'white').css("background","red");
		}else{
			$(this).next("span").text("");
		}		
	})
//yanzhengmima
	$('input').eq(4).blur(function(){
		if($(this).val().length==0){
			$(this).next("span").text("");
			$(this).next("span").css("color",'#ccc');
		}else if($(this).val()!=$('input').eq(3).val()){
			$(this).next("span").text("两次密码不匹配");
			$(this).next("span").css("color",'white').css("background","red");
		}else{
			$(this).next("span").text("");
		}		
	})
	 $(".ljzc").click(function(e){
	 	
	 	var $sjhval=$(".zhuce-sjh input").val() // 手机号框

	 	var $mmval=$("input").eq(3).val();  // 密码框
	 			// console.log($mmval)
	 		
		$.get("http://datainfo.duapp.com/shopdata/userinfo.php",{
							status:"register",
							userID:$sjhval,
							password:$mmval
							},function (data){
								console.log(data);
								if(data==0){
								    alert("该账号已被使用，请重新输入")
								}else if(data==1){
									alert("注册成功")
									location.assign("login.html")
								}else if(data==2){
									alert("数据库错误")
								}
							})
	 	
	 	for(var j=0;j<5;j++){
	 		if($("input").eq(j).val().length==0){
	 			$("input").eq(j).focus();
	 			if(j==4){
	 				$("input").eq(j).next().next("span").text("此处不能为空");
	 				$("input").eq(j).next().next("span").css("color",'white');
	 				e.preventDefault();
	 				return;
	 			}
	 			$('input').eq(j).next("span").text("此处不能为空");
				$('input').eq(j).next("span").css("color",'white').css("background","red");	
				e.preventDefault();
				return;
	 		
	 		}
	 	}
	 	//注册跳转到登录页面
	 	
	 	return false;					
	 				
	 })
	


	
	

		})
	</script>
</html>
